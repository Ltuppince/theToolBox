{"ast":null,"code":"import _defineProperty from \"/Users/lorenzot.tuppince/git/theToolBox/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"/Users/lorenzot.tuppince/git/theToolBox/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _slicedToArray from \"/Users/lorenzot.tuppince/git/theToolBox/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/lorenzot.tuppince/git/theToolBox/client/src/components/auth/Registration.js\";\nimport React, { useState } from \"react\";\nimport axios from \"axios\";\nexport default function Registration() {\n  var _this = this;\n\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      email = _useState2[0],\n      setEmail = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      password = _useState4[0],\n      setPassword = _useState4[1];\n\n  var _useState5 = useState(\"\"),\n      _useState6 = _slicedToArray(_useState5, 2),\n      confirmation = _useState6[0],\n      setConfirmation = _useState6[1];\n\n  var _useState7 = useState({\n    success: false,\n    log: \"\"\n  }),\n      _useState8 = _slicedToArray(_useState7, 2),\n      registration = _useState8[0],\n      setRegistration = _useState8[1];\n\n  var _useState9 = useState({\n    isEmailValid: false,\n    isPasswordMatching: false,\n    isFormComplete: false\n  }),\n      _useState10 = _slicedToArray(_useState9, 2),\n      validation = _useState10[0],\n      setValidation = _useState10[1];\n\n  var handleValidation = function handleValidation() {\n    var _objectSpread2;\n\n    // email\n    var $email = document.querySelector('#registration_user_email').value.trim();\n    var $password = document.querySelector('#registration_user_password').value.trim();\n    var $confirmation = document.querySelector('#registration_user_password_confirmation').value.trim(); // create a condition to check whether email is a valid email using regEx\n\n    var regEmail = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n    setValidation(_objectSpread({}, validation, (_objectSpread2 = {}, _defineProperty(_objectSpread2, 'isPasswordMatching', $password !== \"\" && $password === $confirmation ? true : false), _defineProperty(_objectSpread2, 'isFormComplete', $email !== \"\" && regEmail.test($email) && $password !== \"\" && $password === $confirmation ? true : false), _objectSpread2)));\n  };\n\n  var handleChange = function handleChange(event) {\n    // console.log(\"handle change\", event);\n    handleValidation();\n\n    switch (event.target.name) {\n      case 'email':\n        setEmail(event.target.value);\n\n      case 'password':\n        setPassword(event.target.value);\n\n      case 'confirmation':\n        setConfirmation(event.target.value);\n    }\n  };\n\n  var handleSubmit = function handleSubmit(event) {\n    event.preventDefault();\n    console.log(\"form submitted\");\n    var _this$state = _this.state,\n        email = _this$state.email,\n        password = _this$state.password;\n    axios.post(\"api/users/register\", {\n      user: {\n        email: email,\n        password: password\n      }\n    }, {\n      withCredentials: true\n    }).then(function (response) {\n      var _response$data = response.data,\n          message = _response$data.message,\n          status = _response$data.status,\n          email = _response$data.email,\n          _response$data$error = _response$data.error,\n          error = _response$data$error === void 0 ? null : _response$data$error;\n      console.log(\"registration res\", response);\n\n      if (error) {\n        console.log(\"registration error\", message);\n\n        _this.setState({\n          registration: {\n            success: false,\n            log: message\n          }\n        });\n\n        setRegistration({\n          success: success\n        });\n        throw new Error(\"Status Code: \".concat(status));\n      } else {\n        _this.setState({\n          registration: {\n            success: true,\n            log: \"Successfully created a new employee with email: \".concat(email)\n          }\n        });\n      }\n    }).catch(function (err) {\n      console.error(\"Registration \".concat(err));\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    id: \"registration_user_email\",\n    type: \"email\",\n    name: \"email\",\n    placeholder: \"Email\",\n    value: email,\n    onChange: handleChange,\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    id: \"registration_user_password\",\n    type: \"password\",\n    name: \"password\",\n    placeholder: \"Password\",\n    value: password,\n    onChange: handleChange,\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    id: \"registration_user_password_confirmation\",\n    type: \"password\",\n    name: \"confirmation\",\n    placeholder: \"Password confirmation\",\n    value: confirmation,\n    onChange: handleChange,\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    style: {\n      color: registration.success ? \"green\" : \"red\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 17\n    }\n  }, registration.log), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"btn btn-info\" + !validation.isFormComplete ? \"disabled\" : \"\",\n    disabled: !validation.isFormComplete ? true : false,\n    type: \"submit\",\n    onClick: handleSubmit,\n    value: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 17\n    }\n  })));\n}","map":{"version":3,"sources":["/Users/lorenzot.tuppince/git/theToolBox/client/src/components/auth/Registration.js"],"names":["React","useState","axios","Registration","email","setEmail","password","setPassword","confirmation","setConfirmation","success","log","registration","setRegistration","isEmailValid","isPasswordMatching","isFormComplete","validation","setValidation","handleValidation","$email","document","querySelector","value","trim","$password","$confirmation","regEmail","test","handleChange","event","target","name","handleSubmit","preventDefault","console","state","post","user","withCredentials","then","response","data","message","status","error","setState","Error","catch","err","color"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport axios from \"axios\";\n\nexport default function Registration () {\n   \n    const [email, setEmail] = useState(\"\")\n    const [password, setPassword] = useState(\"\")\n    const [confirmation, setConfirmation] = useState(\"\")\n    const [registration, setRegistration] = useState({ success: false, log: \"\" })\n    const [validation, setValidation] = useState({ isEmailValid: false, isPasswordMatching: false, isFormComplete: false })\n\n    const handleValidation = () => {\n        // email\n        const $email = document.querySelector('#registration_user_email').value.trim()\n        const $password = document.querySelector('#registration_user_password').value.trim()\n        const $confirmation = document.querySelector('#registration_user_password_confirmation').value.trim()\n\n        // create a condition to check whether email is a valid email using regEx\n        const regEmail = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/\n\n        setValidation({\n            ...validation,\n            ['isPasswordMatching']: $password !== \"\" && $password === $confirmation ? true : false,\n            ['isFormComplete']: $email !== \"\" && regEmail.test($email) && $password !== \"\" && $password === $confirmation ? true : false \n        })\n    }\n\n    const handleChange = (event) => {\n        // console.log(\"handle change\", event);\n\n        handleValidation()\n\n        switch (event.target.name) {\n            case 'email':\n                setEmail(event.target.value)\n            case 'password':\n                setPassword(event.target.value)\n            case 'confirmation':\n                setConfirmation(event.target.value)\n        }\n    }\n\n    const handleSubmit = (event) => {\n        event.preventDefault();\n        console.log(\"form submitted\");\n\n        const {\n            email,\n            password,\n        } = this.state;\n\n        axios.post(\"api/users/register\",{\n            user: {\n                email: email,\n                password: password,\n\n            }\n        },\n\n        { withCredentials: true }\n\n        ).then(response =>{\n            const { message, status, email, error = null } = response.data\n            console.log(\"registration res\", response);\n            if (error) {\n                console.log(\"registration error\", message);\n                this.setState({\n                    registration: {\n                        success: false,\n                        log: message\n                    }\n                })\n                setRegistration({\n                    success\n                })\n                throw new Error(`Status Code: ${status}`)\n            } else {\n                this.setState({\n                    registration: {\n                        success: true,\n                        log: `Successfully created a new employee with email: ${email}`\n                    }\n                })\n            }\n        })\n        \n        .catch(err => {\n            console.error(`Registration ${err}`);\n        })\n    }\n    return(\n        <div>\n            <form>\n                <input \n                    id=\"registration_user_email\"\n                    type = \"email\" \n                    name = \"email\" \n                    placeholder = \"Email\" \n                    value = { email } \n                    onChange = { handleChange } \n                    required \n                />\n                <input \n                    id=\"registration_user_password\"\n                    type = \"password\" \n                    name = \"password\" \n                    placeholder = \"Password\" \n                    value = { password } \n                    onChange = { handleChange } \n                    required \n                />\n                <input \n                    id=\"registration_user_password_confirmation\"\n                    type = \"password\" \n                    name = \"confirmation\" \n                    placeholder = \"Password confirmation\" \n                    value = { confirmation } \n                    onChange = { handleChange } \n                    required \n                />\n\n                <p style={{color: registration.success ? \"green\" : \"red\"}}>{registration.log}</p>\n\n                <input className={\"btn btn-info\" + !validation.isFormComplete ? \"disabled\" : \"\" } disabled={!validation.isFormComplete ? true : false } type=\"submit\" onClick={handleSubmit} value=\"submit\"/>\n            </form>\n        </div>\n    );\n}"]},"metadata":{},"sourceType":"module"}