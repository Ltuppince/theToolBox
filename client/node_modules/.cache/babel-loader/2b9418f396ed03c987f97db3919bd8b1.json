{"ast":null,"code":"import _defineProperty from \"/Users/lorenzot.tuppince/git/theToolBox/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"/Users/lorenzot.tuppince/git/theToolBox/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _slicedToArray from \"/Users/lorenzot.tuppince/git/theToolBox/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/lorenzot.tuppince/git/theToolBox/client/src/components/auth/Registration.js\";\nimport React, { useState } from \"react\";\nimport axios from \"axios\";\nexport default function Registration() {\n  var _this = this;\n\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      email = _useState2[0],\n      setEmail = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      password = _useState4[0],\n      setPassword = _useState4[1];\n\n  var _useState5 = useState(\"\"),\n      _useState6 = _slicedToArray(_useState5, 2),\n      confirmation = _useState6[0],\n      setConfirmation = _useState6[1];\n\n  var _useState7 = useState({\n    success: false,\n    log: \"\"\n  }),\n      _useState8 = _slicedToArray(_useState7, 2),\n      registration = _useState8[0],\n      setRegistration = _useState8[1];\n\n  var _useState9 = useState({\n    isEmailValid: false,\n    isPasswordMatching: false,\n    isFormComplete: false\n  }),\n      _useState10 = _slicedToArray(_useState9, 2),\n      validation = _useState10[0],\n      setValidation = _useState10[1];\n\n  var handleValidation = function handleValidation() {\n    // email\n    var $email = document.querySelector('#registration_user_email').value.trim();\n    var $password = document.querySelector('#registration_user_password').value.trim();\n    var $confirmation = document.querySelector('#registration_user_password_confirmation').value.trim(); // create a condition to check whether email is a valid email using regEx\n\n    var regEmail = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n\n    _this.setState({\n      validation: {\n        password: {\n          isMatching: password !== \"\" && password === confirmation ? true : false\n        },\n        isComplete: email !== \"\" && regEmail.test(email) && password !== \"\" && password === confirmation ? true : false\n      }\n    });\n\n    setValidation(_objectSpread({}, validation, _defineProperty({}, isPasswordMatching, $password !== \"\" && $password === confirmation ? true : false)));\n  };\n\n  var handleChange = function handleChange(event) {\n    // console.log(\"handle change\", event);\n    _this.handleValidation();\n\n    _this.setState(_defineProperty({}, event.target.name, event.target.value));\n  };\n\n  var handleSubmit = function handleSubmit(event) {\n    event.preventDefault();\n    console.log(\"form submitted\");\n    var _this$state = _this.state,\n        email = _this$state.email,\n        password = _this$state.password;\n    axios.post(\"api/users/register\", {\n      user: {\n        email: email,\n        password: password\n      }\n    }, {\n      withCredentials: true\n    }).then(function (response) {\n      var _response$data = response.data,\n          message = _response$data.message,\n          status = _response$data.status,\n          email = _response$data.email,\n          _response$data$error = _response$data.error,\n          error = _response$data$error === void 0 ? null : _response$data$error;\n      console.log(\"registration res\", response);\n\n      if (error) {\n        console.log(\"registration error\", message);\n\n        _this.setState({\n          registration: {\n            success: false,\n            log: message\n          }\n        });\n\n        throw new Error(\"Status Code: \".concat(status));\n      } else {\n        _this.setState({\n          registration: {\n            success: true,\n            log: \"Successfully created a new employee with email: \".concat(email)\n          }\n        });\n      }\n    }).catch(function (err) {\n      console.error(\"Registration \".concat(err));\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    id: \"registration_user_email\",\n    type: \"email\",\n    name: \"email\",\n    placeholder: \"Email\",\n    value: this.state.email,\n    onChange: this.handleChange,\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    id: \"registration_user_password\",\n    type: \"password\",\n    name: \"password\",\n    placeholder: \"Password\",\n    value: this.state.password,\n    onChange: this.handleChange,\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    id: \"registration_user_password_confirmation\",\n    type: \"password\",\n    name: \"password_confirmation\",\n    placeholder: \"Password confirmation\",\n    value: this.state.password_confirmation,\n    onChange: this.handleChange,\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    style: {\n      color: this.state.registration.success ? \"green\" : \"red\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 17\n    }\n  }, this.state.registration.log), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"btn btn-info\" + !this.state.validation.isComplete ? \"disabled\" : \"\",\n    disabled: !this.state.validation.isComplete ? true : false,\n    type: \"submit\",\n    onClick: this.handleSubmit,\n    value: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 17\n    }\n  })));\n}","map":{"version":3,"sources":["/Users/lorenzot.tuppince/git/theToolBox/client/src/components/auth/Registration.js"],"names":["React","useState","axios","Registration","email","setEmail","password","setPassword","confirmation","setConfirmation","success","log","registration","setRegistration","isEmailValid","isPasswordMatching","isFormComplete","validation","setValidation","handleValidation","$email","document","querySelector","value","trim","$password","$confirmation","regEmail","setState","isMatching","isComplete","test","handleChange","event","target","name","handleSubmit","preventDefault","console","state","post","user","withCredentials","then","response","data","message","status","error","Error","catch","err","password_confirmation","color"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport axios from \"axios\";\n\nexport default function Registration () {\n   \n    const [email, setEmail] = useState(\"\")\n    const [password, setPassword] = useState(\"\")\n    const [confirmation, setConfirmation] = useState(\"\")\n    const [registration, setRegistration] = useState({ success: false, log: \"\" })\n    const [validation, setValidation] = useState({ isEmailValid: false, isPasswordMatching: false, isFormComplete: false })\n\n    const handleValidation = () => {\n        // email\n        const $email = document.querySelector('#registration_user_email').value.trim()\n        const $password = document.querySelector('#registration_user_password').value.trim()\n        const $confirmation = document.querySelector('#registration_user_password_confirmation').value.trim()\n\n        // create a condition to check whether email is a valid email using regEx\n        const regEmail = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/\n\n        this.setState({\n            validation: {\n                password: {\n                    isMatching: password !== \"\" && password === confirmation ? true : false\n                },\n                isComplete: email !== \"\" && regEmail.test(email) && password !== \"\" && password === confirmation ? true : false \n            }\n        })\n\n        setValidation({\n            ...validation,\n            [isPasswordMatching]: $password !== \"\" && $password === confirmation ? true : false\n        })\n    }\n\n    const handleChange = (event) => {\n        // console.log(\"handle change\", event);\n\n        this.handleValidation()\n\n        this.setState({\n            [event.target.name]: event.target.value\n        })\n    }\n\n    const handleSubmit = (event) => {\n        event.preventDefault();\n        console.log(\"form submitted\");\n\n        const {\n            email,\n            password,\n        } = this.state;\n\n        axios.post(\"api/users/register\",{\n            user: {\n                email: email,\n                password: password,\n\n            }\n        },\n\n        { withCredentials: true }\n\n        ).then(response =>{\n            const { message, status, email, error = null } = response.data\n            console.log(\"registration res\", response);\n            if (error) {\n                console.log(\"registration error\", message);\n                this.setState({\n                    registration: {\n                        success: false,\n                        log: message\n                    }\n                })\n                throw new Error(`Status Code: ${status}`)\n            } else {\n                this.setState({\n                    registration: {\n                        success: true,\n                        log: `Successfully created a new employee with email: ${email}`\n                    }\n                })\n            }\n        })\n        \n        .catch(err => {\n            console.error(`Registration ${err}`);\n        })\n    }\n    return(\n        <div>\n            <form>\n                <input \n                    id=\"registration_user_email\"\n                    type = \"email\" \n                    name = \"email\" \n                    placeholder = \"Email\" \n                    value = { this.state.email } \n                    onChange = { this.handleChange } \n                    required \n                />\n                <input \n                    id=\"registration_user_password\"\n                    type = \"password\" \n                    name = \"password\" \n                    placeholder = \"Password\" \n                    value = { this.state.password } \n                    onChange = { this.handleChange } \n                    required \n                />\n                <input \n                    id=\"registration_user_password_confirmation\"\n                    type = \"password\" \n                    name = \"password_confirmation\" \n                    placeholder = \"Password confirmation\" \n                    value = { this.state.password_confirmation } \n                    onChange = { this.handleChange } \n                    required \n                />\n\n                <p style={{color: this.state.registration.success ? \"green\" : \"red\"}}>{this.state.registration.log}</p>\n\n                <input className={\"btn btn-info\" + !this.state.validation.isComplete ? \"disabled\" : \"\" } disabled={!this.state.validation.isComplete ? true : false } type=\"submit\" onClick={this.handleSubmit} value=\"submit\"/>\n            </form>\n        </div>\n    );\n}"]},"metadata":{},"sourceType":"module"}